[package]
name = "litebike"
version = "0.1.0"
edition = "2021"
authors = ["jnorthrup"]
description = "High-performance proxy with universal protocol detection using Patricia Trie"
license = "AGPL-3.0-or-later"
repository = "https://github.com/jnorthrup/litebike"
keywords = ["proxy", "socks5", "http", "protocol-detection", "networking"]
categories = ["network-programming", "web-programming"]
readme = "README.md"

[lib]
name = "litebike"
path = "src/lib.rs"

[[bin]]
name = "litebike"
path = "src/main.rs"

[[bin]]
name = "litebike-proxy"
path = "src/main-termux.rs"

[[bin]]
name = "test-patricia"
path = "src/bin/test_patricia.rs"

[[bin]]
name = "test-tls-sni"
path = "src/bin/test_tls_sni.rs"

[[bin]]
name = "mock-protocols"
path = "src/bin/mock_protocols.rs"

[[bin]]
name = "benchmark-simd"
path = "src/bin/benchmark_simd.rs"

[[bin]]
name = "massive-torture-test"
path = "src/bin/massive_torture_test.rs"

[[bin]]
name = "working-torture-test"
path = "src/bin/working_torture_test.rs"

[[bin]]
name = "minimal-torture-test"
path = "src/bin/minimal_torture_test.rs"

[dependencies]
tokio = { version = "1", features = ["full"] }
trust-dns-resolver = { version = "0.23", features = ["dns-over-https-rustls", "tokio-runtime"] }
pnet = "0.35"
igd-next = "0.14"
log = "0.4"
env_logger = "0.11"
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
httparse = "1.8"
libc = "0.2"
lazy_static = "1.4"

[dev-dependencies]
tokio-test = "0.4"

[profile.release]
lto = true
opt-level = 3
codegen-units = 1
strip = true
panic = "abort"